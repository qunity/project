services:
  php-fpm:
    environment:
      - NODE_ENV=development
    ports:
      - ${TRAEFIK_LISTEN:-127.0.0.1}:${PWA_DEV_SERVER_PORT}:${PWA_DEV_SERVER_PORT}
      - ${TRAEFIK_LISTEN:-127.0.0.1}:${PWA_STAGING_SERVER_PORT}:${PWA_STAGING_SERVER_PORT}
    volumes:
      - type: bind
        source: ./${WARDEN_PWA_ROOT}
        target: /var/www/pwa
        bind:
          create_host_path: true
      - type: bind
        source: ${HOME}/.warden/ssl/certs/${TRAEFIK_DOMAIN}.key.pem
        target: /etc/ssl/warden-ssl-certs/${TRAEFIK_DOMAIN}.key.pem
        read_only: true
        bind:
          create_host_path: false
      - type: bind
        source: ${HOME}/.warden/ssl/certs/${TRAEFIK_DOMAIN}.crt.pem
        target: /etc/ssl/warden-ssl-certs/${TRAEFIK_DOMAIN}.crt.pem
        read_only: true
        bind:
          create_host_path: false
